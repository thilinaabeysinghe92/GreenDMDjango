/* jscow - Javascript Component Framework - jscow-window-1.0.0 - Mario Linz - http://www.jscow.de */jsCow.res.components.window=function(){};jsCow.res.components.window.prototype={init:function(){return this},setDefaultMVC:function(){this.setModel(jsCow.res.model.window);this.setView(jsCow.res.view.window);this.setController(jsCow.res.controller.window)},setTop:function(a){this.globalEvents.trigger("setTop",{__top__:a},this);return this},setLeft:function(a){this.globalEvents.trigger("setLeft",{__left__:a},this);return this},setZIndex:function(a){this.globalEvents.trigger("setZIndex",{__zindex__:a},this);return this},showCloseButton:function(){this.globalEvents.trigger("showCloseButton",{},this);return this},hideCloseButton:function(){this.globalEvents.trigger("hideCloseButton",{},this);return this},showMaxButton:function(){this.globalEvents.trigger("showMaxButton",{},this);return this},hideMaxButton:function(){this.globalEvents.trigger("hideMaxButton",{},this);return this},showMinButton:function(){this.globalEvents.trigger("showMinButton",{},this);return this},hideMinButton:function(){this.globalEvents.trigger("hideMinButton",{},this);return this},close:function(){this.globalEvents.trigger("close",{},this);return this}};jsCow.res.model.window=function(){this.type="jsCow.res.model.window";this.config={globalDisabled:false,enabled:true,__top__:null,__left__:null,__closeButton__:true,__maxButton__:true,__minButton__:true,zindex:0}};jsCow.res.model.window.prototype={init:function(){this.globalEvents.trigger("viewInit",this.getConfig(),this.getCmp())},setTitle:function(){if(this.isEnabled()){this.setConfig({title:""});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp());this.events.trigger("onTitleChange",this.getConfig())}return this},showCloseButton:function(a){if(this.isEnabled()){this.setConfig({__closeButton__:true});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp())}return this},hideCloseButton:function(a){if(this.isEnabled()){this.setConfig({__closeButton__:false});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp())}return this},showMaxButton:function(a){if(this.isEnabled()){this.setConfig({__maxButton__:true});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp())}return this},hideMaxButton:function(a){if(this.isEnabled()){this.setConfig({__maxButton__:false});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp())}return this},showMinButton:function(a){if(this.isEnabled()){this.setConfig({__minButton__:false});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp())}return this},hideMinButton:function(a){if(this.isEnabled()){this.setConfig({__minButton__:false});this.globalEvents.trigger("viewUpdate",this.getConfig(),this.getCmp())}return this},close:function(a){if(this.isEnabled()){if(this.getCmp().events.trigger("onBeforeClose",{})){this.getCmp().del();this.getCmp().events.trigger("onClose",{})}}return this}};jsCow.res.view.window=function(){this.execInit=false;this.type="jsCow.res.view.window";this.maximized=false;this.minimized=false;this.dom={};this.dom.main=$("<div/>").addClass("jscow-window");this.dom.button={};this.dom.button.close=$("<div/>").addClass("jscow-window-button").append("&#215;").appendTo(this.dom.main);this.dom.button.max=$("<div/>").addClass("jscow-window-button").append("&equiv;").appendTo(this.dom.main);this.dom.button.min=$("<div/>").addClass("jscow-window-button").append("&#8230;").appendTo(this.dom.main);this.dom.title=$("<div/>").addClass("jscow-window-title jscow-cursor clearfix").appendTo(this.dom.main);this.dom.icon=$("<div/>").addClass("jscow-window-title-ico jscow-ico-16 jscow-float-left").appendTo(this.dom.title);this.dom.title.text=$("<div/>").addClass("jscow-window-title-text jscow-float-left").appendTo(this.dom.title);this.dom.content=$("<div/>").addClass("jscow-window-content").addClass("clearfix").appendTo(this.dom.main)};jsCow.res.view.window.prototype={init:function(b){var a=b.data;$("<div/>").addClass("clearfix").appendTo(this.dom.main);if(a.title){this.dom.title.html(a.title)}this.dom.main.css({zIndex:jsCow.getNextZIndex()});this.dom.title.click((function(c){return function(){c.setTitle();c.setIcon()}})(this));this.dom.button.close.click((function(c){return function(){if(c.getCmp().getModel().getConfig("enabled")||!c.getCmp().getModel().getConfig("globalDisabled")){c.getCmp().globalEvents.trigger("close",{},c.getCmp())}}})(this));this.dom.button.max.click((function(c){return function(){if(c.getCmp().getModel().getConfig("enabled")||!c.getCmp().getModel().getConfig("globalDisabled")){c.setMaximized()}}})(this));this.dom.button.min.click((function(c){return function(){if(c.getCmp().getModel().getConfig("enabled")||!c.getCmp().getModel().getConfig("globalDisabled")){c.setMinimized()}}})(this));window.setTimeout((function(c){return function(){c.dom.main.draggable({handle:c.dom.title,iframeFix:true,drag:function(d){c.dom.content.css("visibility","hidden")},stop:function(d){c.dom.content.css("visibility","visible");c.getCmp().setPos(c.dom.main.position().top,c.dom.main.position().left)}})}})(this),0);this.update(b)},update:function(a){var a=a.data;if(a){if(!a.enabled||a.globalDisabled){this.dom.main.addClass("jscow-window-disabled").removeClass("jscow-window")}else{this.dom.main.addClass("jscow-window").removeClass("jscow-window-disabled");if(a.title){this.dom.title.html(a.title)}if(a.__closeButton__){this.showCloseButton()}else{this.hideCloseButton()}if(a.__maxButton__){this.showMaxButton()}else{this.hideMaxButton()}if(a.__minButton__){this.showMinButton()}else{this.hideMinButton()}if(a.__width__){this.dom.main.width(a.__width__)}if(a.__height__){this.dom.content.height(a.__height__)}if(a.__top__){this.dom.main.css({top:a.__top__})}if(a.__left__){this.dom.main.css({left:a.__left__})}if(a.__zindex__){this.dom.main.css({zindex:a.__zindex__})}if(a.hide){this.dom.main.addClass("jscow-hide")}else{this.dom.main.removeClass("jscow-hide")}}}return this},setMaximized:function(){if(!this.maximized){this.hideMinButton();this.dom.main.addClass("jscow-window-maximized");this.maximized=true}else{this.showMinButton();this.dom.main.removeClass("jscow-window-maximized");this.maximized=false}this.getCmp().events.trigger("onMaximized",{});this.getCmp().globalEvents.trigger("update",{},this.getCmp().getChildren());return this},setMinimized:function(){if(!this.minimized){this.dom.content.hide();this.hideMaxButton();this.minimized=true}else{this.dom.content.show();this.showMaxButton();this.minimized=false}this.getCmp().events.trigger("onMinimized",{});this.getCmp().globalEvents.trigger("update",{},this.getCmp().getChildren());return this},setTitle:function(){this.globalEvents.trigger("setTitle",{},this.getCmp());return this},setIcon:function(){this.globalEvents.trigger("setIcon",{},this.getCmp());return this},setFocus:function(a){this.dom.main.css({zIndex:jsCow.getNextZIndex()}).addClass("jscow-focus");return this},showCloseButton:function(a){this.dom.button.close.show();return this},hideCloseButton:function(a){this.dom.button.close.hide();return this},showMaxButton:function(a){this.dom.button.max.show();return this},hideMaxButton:function(a){this.dom.button.max.hide();return this},showMinButton:function(a){this.dom.button.min.show();return this},hideMinButton:function(a){this.dom.button.min.hide();return this}};jsCow.res.controller.window=function(){this.type="jsCow.res.controller.window"};jsCow.res.controller.window.prototype={init:function(){},handleSetTitle:function(a){if(this.isMethodExists(this.getModel().setTitle)){this.getModel().setTitle(a)}return true},handleSetTop:function(a){if(this.isMethodExists(this.getModel().setTop)){this.getModel().setTop(a)}return true},handleSetLeft:function(a){if(this.isMethodExists(this.getModel().setLeft)){this.getModel().setLeft(a)}return true},handleShowCloseButton:function(a){if(this.isMethodExists(this.getModel().showCloseButton)){this.getModel().showCloseButton(a)}return true},handleHideCloseButton:function(a){if(this.isMethodExists(this.getModel().hideCloseButton)){this.getModel().hideCloseButton(a)}return true},handleShowMaxButton:function(a){if(this.isMethodExists(this.getModel().showMaxButton)){this.getModel().showMaxButton(a)}return true},handleHideMaxButton:function(a){if(this.isMethodExists(this.getModel().hideMaxButton)){this.getModel().hideMaxButton(a)}return true},handleShowMinButton:function(a){if(this.isMethodExists(this.getModel().showMinButton)){this.getModel().showMinButton(a)}return true},handleHideMinButton:function(a){if(this.isMethodExists(this.getModel().hideMinButton)){this.getModel().hideMinButton(a)}return true},handleClose:function(a){if(this.isMethodExists(this.getModel().close)){this.getModel().close(a)}return true}};